(self.webpackChunkpawn_simulator=self.webpackChunkpawn_simulator||[]).push([[8131],{8131:(t,e,n)=>{"use strict";n.r(e),n.d(e,{HomePageModule:()=>k});var o=n(6274),i=n(4717),s=n(4988),r=n(4552),c=n(3606);function a(t,e,n,o){return new(n||(n=Promise))(function(i,s){function r(t){try{a(o.next(t))}catch(e){s(e)}}function c(t){try{a(o.throw(t))}catch(e){s(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(r,c)}a((o=o.apply(t,e||[])).next())})}const l=["place","move","left","right","report"],d=["north","east","south","west"],p=["black","white"],u={pawn:{white:"&#x2659;",black:"&#x265F;"}},h={north:1,south:-1,west:-1,east:1};let m=(()=>{class t extends class extends class{constructor(){this.rows=8,this.columns=8,this.info=[],this.history=[]}get lastIndex(){const{x:t,y:e}=this.history[0]||{x:null,y:null};return null===t||null===e?null:this.index(t,e)}index(t,e){return{i:this.columns-1-e,j:t}}isPawnMoveValid(t,e){return 0<=t&&t<this.rows&&0<=e&&e<this.columns}isGonnaCapture({x:t,y:e}){const{i:n,j:o}=this.index(t,e);return!!this.info[n][o].piece}isValidValue(t,e){return t.every(t=>null!=e[t])}reset(){this.info=[...Array(this.rows).keys()].reverse().map(t=>[...Array(this.columns).keys()].map(e=>({x:e,y:t})))}}{getPiece(t,e){const{i:n,j:o}=this.index(t,e),i=this.info[n][o];if(!(null==i?void 0:i.piece))throw new Error("No Piece in square to execute action");return i}addPiece(t,e,n,o=!1){const{i:i,j:s}=this.index(t,e),{color:r}=n,c=Object.assign(Object.assign({},this.info[i][s]),{piece:o?n:Object.assign(Object.assign({},n),{name:"pawn",doublePossible:!0,display:u.pawn[r]})});return this.info[i][s]=c,c}updatePiece(t,e,n){if(this.isGonnaCapture(e))throw new Error("Capture piece not part of scope");const o=this.removePiece(t.x,t.y);return this.addPiece(e.x,e.y,Object.assign(Object.assign({},o),n),!0)}modifyPiece(t,e,n){const{i:o,j:i}=this.index(t,e),{piece:s}=this.info[o][i];if(!s)throw new Error("No Piece in square to execute action");const r=Object.assign(Object.assign({},this.info[o][i]),{piece:Object.assign(Object.assign({},s),n)});return this.info[o][i]=r,r}removePiece(t,e){const{i:n,j:o}=this.index(t,e),i=this.info[n][o],{piece:s}=i,r=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n}(i,["piece"]);return this.info[n][o]=r,s}getSteps(t,e,n){return t.includes(e)?n*h[e]:0*n}getTurnDirection(t,e){const n=[...d,...d],o=n.findIndex((e,n)=>0!==n&&e===t);return n["left"===e?o-1:o+1]}}{constructor(t){super(),this.toast=t}execute(t){return a(this,void 0,void 0,function*(){try{if("place"!==t.command&&!this.lastIndex){if("report"===t.command)throw new Error("Nothing to report");throw new Error("Place a piece before other actions")}const e=this[t.command](t);(null==e?void 0:e.piece)&&this.history.unshift(e)}catch(e){const t=yield this.toast.create({message:e.message,duration:3e3});yield null==t?void 0:t.present()}})}place(t){if(!this.isValidValue(["x","y","color","direction"],t))throw new Error("Control inputs insufficient to execute command");const{x:e,y:n}=t;if(e>=this.rows||n>=this.columns)throw new Error("The x/y coordinate falls outside board limit");if(this.isGonnaCapture({x:e,y:n}))throw new Error("Cannot place a piece on top of another");return this.addPiece(e,n,t)}move({steps:t,command:e}){if(!this.isValidValue(["steps"],{steps:t}))throw new Error("Control inputs insufficient to execute command");const{x:n,y:o,piece:i}=this.history[0];if(!i.doublePossible&&2==+t)throw new Error("Cannot make 2 steps after first move");const s=+n+ +this.getSteps(["west","east"],i.direction,t),r=+o+ +this.getSteps(["north","south"],i.direction,t);if(this.isPawnMoveValid(s,r)){const i={x:s,y:r};return this.updatePiece({x:n,y:o},i,Object.assign({command:e,steps:t,doublePossible:!1},i))}throw new Error("The x/y coordinate falls outside board limit")}left({command:t}){const{x:e,y:n,piece:o}=this.history[0];return this.modifyPiece(e,n,{command:t,direction:this.getTurnDirection(o.direction,"left")})}right({command:t}){const{x:e,y:n,piece:o}=this.history[0];return this.modifyPiece(e,n,{command:t,direction:this.getTurnDirection(o.direction,"right")})}report(t){return a(this,void 0,void 0,function*(){const{x:t,y:e}=this.history[0],{piece:n}=this.getPiece(t,e),o=yield this.toast.create({header:"Report",message:this.getMessage(n),duration:5e3});yield null==o?void 0:o.present()})}getMessage(t){return`${u[t.name][t.color]} facing ${t.direction} from following xy axis ${t.x}${t.y}`}}return t.\u0275fac=function(e){return new(e||t)(c.LFG(i.yF))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function g(t,e){if(1&t&&(c.TgZ(0,"td"),c._UZ(1,"p",1),c._UZ(2,"span",2),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.Q6J("innerHtml",null==t.piece?null:t.piece.display,c.oJD)("ngClass",null==t.piece?null:t.piece.direction),c.xp6(1),c.hYB("innerHtml","",t.x,"",t.y,"",c.oJD)}}function b(t,e){if(1&t&&(c.TgZ(0,"tr"),c.YNc(1,g,3,4,"td",0),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.Q6J("ngForOf",t)}}let f=(()=>{class t{constructor(t){this.board=t}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(m))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-board"]],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],[3,"innerHtml","ngClass"],[3,"innerHtml"]],template:function(t,e){1&t&&(c.TgZ(0,"table"),c.YNc(1,b,2,1,"tr",0),c.qZA()),2&t&&(c.xp6(1),c.Q6J("ngForOf",e.board.info))},directives:[o.sg,o.mk],styles:["table[_ngcontent-%COMP%]{border:10px solid #36424e}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{position:relative;min-width:50px;width:50px;height:50px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin:0;font-size:30px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   p.south[_ngcontent-%COMP%]{transform:rotate(-180deg)}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   p.west[_ngcontent-%COMP%]{transform:rotate(-90deg)}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   p.east[_ngcontent-%COMP%]{transform:rotate(-270deg)}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;padding:0 0 4px 4px;font-size:6px}@media (max-width: 767px){table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{min-width:40px;width:40px;height:40px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n)   td[_ngcontent-%COMP%]:nth-child(odd), table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd)   td[_ngcontent-%COMP%]:nth-child(2n){background:#a7b1bb}"]}),t})();var x=n(3305),y=n(7689),P=n(4704),w=n(6748);let O=(()=>{class t{constructor(t,e){this.fb=t,this.board=e,this.boardCommands=l.map(t=>({value:t})),this.boardDirections=d.map(t=>({value:t})),this.boardColors=p.map(t=>({value:t})),this.disablePlace=!1,this.disableMove=!0}ngOnInit(){this.board.reset(),this.boardControls=this.fb.group({command:["",s.kI.required],x:[null,[s.kI.min(0),s.kI.max(this.board.rows-1)]],y:[null,[s.kI.min(0),s.kI.max(this.board.columns-1)]],steps:[null,[s.kI.min(1),s.kI.max(2)]],direction:null,color:null}),this.command$=this.boardControls.controls.command.valueChanges.pipe((0,x.h)(t=>!!t),(0,y.x)()).subscribe(this.resetAndDisable.bind(this))}resetAndDisable(t){return this.boardControls.reset(),this.boardControls.controls.command.patchValue(t),"place"===t?(this.disablePlace=!1,void(this.disableMove=!0)):"move"===t?(this.disablePlace=!0,void(this.disableMove=!1)):(this.disablePlace=!0,void(this.disableMove=!0))}ngOnDestroy(){this.command$.unsubscribe()}submit(){return a(this,void 0,void 0,function*(){yield this.board.execute(this.boardControls.value)})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(s.qu),c.Y36(m))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-board-controls"]],decls:12,vars:20,consts:[[3,"formGroup"],["key","command","placeholder","Pick a command",3,"options"],[1,"numerics"],["inputType","number","key","x","label","X Axis",3,"min","max","disabled","placeholder"],["inputType","number","key","y","label","Y Axis",3,"min","max","disabled","placeholder"],["inputType","number","key","steps","label","Steps","placeholder","1 or 2",3,"min","max","disabled"],["key","direction",3,"placeholder","options","disabled"],["key","color",3,"placeholder","options","disabled"],["color","secondary","expand","block",3,"disabled","click"]],template:function(t,e){1&t&&(c.TgZ(0,"form",0),c.TgZ(1,"ion-item-group"),c._UZ(2,"ps-select",1),c.TgZ(3,"div",2),c._UZ(4,"ps-input",3),c._UZ(5,"ps-input",4),c._UZ(6,"ps-input",5),c.qZA(),c.TgZ(7,"div"),c._UZ(8,"ps-select",6),c._UZ(9,"ps-select",7),c.qZA(),c.qZA(),c.TgZ(10,"ion-button",8),c.NdJ("click",function(){return e.submit()}),c._uU(11,"Execute"),c.qZA(),c.qZA()),2&t&&(c.Q6J("formGroup",e.boardControls),c.xp6(2),c.Q6J("options",e.boardCommands),c.xp6(2),c.MGl("placeholder","0 - ",e.board.rows-1,""),c.Q6J("min",0)("max",e.board.rows-1)("disabled",e.disablePlace),c.xp6(1),c.MGl("placeholder","0 - ",e.board.columns-1,""),c.Q6J("min",0)("max",e.board.columns-1)("disabled",e.disablePlace),c.xp6(1),c.Q6J("min",1)("max",2)("disabled",e.disableMove),c.xp6(2),c.MGl("placeholder","eg. ",e.boardDirections[0].value,""),c.Q6J("options",e.boardDirections)("disabled",e.disablePlace),c.xp6(1),c.MGl("placeholder","eg. ",e.boardColors[0].value,""),c.Q6J("options",e.boardColors)("disabled",e.disablePlace),c.xp6(1),c.Q6J("disabled",e.boardControls.invalid))},directives:[s._Y,s.JL,s.sg,i.Ub,P.Y,w.g,i.YG],styles:[""]}),t})();function C(t,e){if(1&t&&(c.TgZ(0,"ion-item"),c._UZ(1,"p",2),c.qZA()),2&t){const t=e.$implicit,n=c.oxw();c.xp6(1),c.hYB("innerHtml","",n.pieces[(null==t||null==t.piece?null:t.piece.name)||"pawn"][(null==t||null==t.piece?null:t.piece.color)||"white"]," ",null==t?null:t.piece.command,"",c.oJD)}}let v=(()=>{class t{constructor(t){this.board=t,this.pieces=u}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(m))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-history"]],decls:8,vars:1,consts:[["lines","none"],[4,"ngFor","ngForOf"],[3,"innerHtml"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-item-group"),c.TgZ(1,"h1"),c._uU(2,"Pawn Simulator"),c.qZA(),c.TgZ(3,"h5"),c._uU(4,"History:"),c.qZA(),c.TgZ(5,"section"),c.TgZ(6,"ion-list",0),c.YNc(7,C,2,2,"ion-item",1),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(7),c.Q6J("ngForOf",e.board.history))},directives:[i.Ub,i.q_,o.sg,i.Ie],styles:['h1[_ngcontent-%COMP%]{font-family:Pacifico}h5[_ngcontent-%COMP%]{font-feature-settings:"smcp";font-variant:small-caps;color:#a9a9a9}section[_ngcontent-%COMP%]{height:300px;max-height:270px;overflow-y:scroll}section[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{--ion-item-background:#0000}section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-transform:capitalize;color:#a9a9a9}']}),t})();const _=[{path:"",component:(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-home"]],decls:5,vars:1,consts:[[3,"fullscreen"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-content",0),c.TgZ(1,"section"),c._UZ(2,"app-board"),c._UZ(3,"app-board-controls"),c._UZ(4,"app-history"),c.qZA(),c.qZA()),2&t&&c.Q6J("fullscreen",!0)},directives:[i.W2,f,O,v],styles:["section[_ngcontent-%COMP%]{display:flex;margin:2vw}section[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:flex;justify-content:center;height:max-content;padding:2vw;flex-basis:0;flex-grow:1}@media (max-width: 767px){section[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 959px){section[_ngcontent-%COMP%]{flex-wrap:wrap}}"]}),t})()}];let M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[r.Bz.forChild(_)],r.Bz]}),t})();var Z=n(5349);let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[o.ez,s.u5,i.Pc,M,Z.m]]}),t})()}}]);